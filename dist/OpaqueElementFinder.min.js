!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.OpaqueElementFinder=e()}(this,function(){"use strict";function t(){function t(t,e){var n=getComputedStyle(t).opacity,i=r(n);return e>=i}function e(t,e){var i=getComputedStyle(t).backgroundColor,r=n(i);return e>=r}function n(t){if("transparent"===t)return 0;if(/^[a-z]+$/i.test(t))return 255;var e=t.match(/^rgba.*,\s*(\d\.?\d*)\s*\)$/);return e?r(e[1]):255}function i(t,e){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var i=n.getContext("2d");return i.drawImage(t,0,0,e.width,e.height),i}function r(t){if(t===o)return t;if(void 0===t)return 12;switch(typeof t){case"string":t=parseFloat(t),t=Math.floor(255*t);case"number":if(!(255>=t&&t>=0))throw new Error('expected a number between 0 and 255 or a string representing an opacity between "0" and "1", e.g. "0.25"')}return o=t,t}this.opaqueElementFromPoint=function(t,e,n){for(var i=r(n),o=[],a=null;;){var u=document.elementFromPoint(t,e);if(null===u)break;if(!this.elementIsTransparentAtPoint(u,t,e,i)){a=u;break}o.push({element:u,visibility:{value:u.style.getPropertyValue("visibility"),priority:u.style.getPropertyPriority("visibility")}}),u.style.setProperty("visibility","hidden","important")}return o.forEach(function(t){t.element.style.setProperty("visibility",t.visibility.value,t.visibility.priority)}),a},this.elementIsTransparentAtPoint=function(n,i,o,a){return a=r(a),n===document.documentElement?!1:t(n,a)?!0:e(n,a)?"IMG"!==n.nodeName||this.imageIsTransparentAtPoint(n,i,o,a):!1},this.imageIsTransparentAtPoint=function(t,e,n,o){o=r(o);var a=t.getBoundingClientRect(),u=e-a.left,s=n-a.top,l=i(t,a),d=l.getImageData(u,s,1,1).data;return d[3]<=o};var o={}}return t});
//# sourceMappingURL=OpaqueElementFinder.min.js.map